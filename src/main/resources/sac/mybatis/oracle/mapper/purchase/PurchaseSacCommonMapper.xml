<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="PurchaseSacCommon">

    <!-- 구매Part 테넌트 정책 목록 조회 -->
    <select id="searchPurchaseTenantPolicyList" parameterType="PurchaseTenantPolicy" resultType="PurchaseTenantPolicy">
        SELECT /* PurchaseSacCommonMapper.searchPurchaseTenantPolicyList, 구매Part 테넌트 정책 목록 조회, 이승택/nTels, 2014-01-22 */
                tenant_id
              , policy_id
              , policy_seq
              , policy_nm
              , proc_pattern_cd
              , tenant_prod_grp_cd
              , apply_unit_cd
              , apply_value
              , cond_unit_cd
              , cond_value
              , cond_period_unit_cd
              , cond_period_value
              , cond_clsf_unit_cd
              , cond_clsf_value
              , policy_prior
          FROM  tb_cm_tenant_sale_policy 
         WHERE  tenant_id = #{tenantId}
         <if test="procPatternCd != null and procPatternCd != ''">
           AND  proc_pattern_cd = #{procPatternCd}
         </if>
         <if test="ignoreTenantProdGrpCd == null or ignoreTenantProdGrpCd != true">
           AND  (tenant_prod_grp_cd IS NULL OR #{tenantProdGrpCd, jdbcType=VARCHAR} LIKE tenant_prod_grp_cd || '%')
         </if>
           AND  SYSDATE BETWEEN start_dt AND expr_dt
      ORDER BY  policy_prior, policy_id, policy_seq
    </select>
    
</mapper>