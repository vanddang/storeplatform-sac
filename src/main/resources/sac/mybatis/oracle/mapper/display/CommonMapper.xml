<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Common">

    <!--배치 완료 일시 조회-->
    <select id="getBatchStandardDate" parameterType="com.skplanet.storeplatform.sac.display.common.vo.BatchStandardDateRequest" resultType="String">
       /* CommonMapper.xml, getBatchStandardDate, SAC : 정희원 , 2014-01-07 */
        SELECT
          to_char(STD_DT, 'yyyyMMddHH24miss')
        FROM TB_DP_BATCH_COMPT
        WHERE TENANT_ID=#{tenantId}
          AND BATCH_ID=#{batchId}
    </select>

    <!-- 메뉴 목록 조회 -->
    <select id="getMenuItemList" parameterType="com.skplanet.storeplatform.sac.display.common.vo.MenuItemReq" resultType="com.skplanet.storeplatform.sac.display.common.vo.MenuItem">
        /* CommonMapper.xml, getMenuItemList, SAC : 정희원 , 2014-01-24 */
        select
            MC.MENU_ID,
            MC.MENU_DEPTH,
            decode(MC.INFR_MENU_YN, 'Y', 1, 0) as IS_INFR_MENU,
            MC.UP_MENU_ID,
            MC.TOP_MENU_ID,
            MD.MENU_NM,
            MD.MENU_DESC
        from
                TB_DP_MENU_CATEGORY MC inner join TB_DP_MENU_CATEGORY_DESC MD
                    on MC.MENU_ID = MD.MENU_ID and MD.LANG_CD = #{langCd} and MC.USE_YN = 'Y'
        start with
            MC.MENU_ID in (select MP.MENU_ID from TB_DP_MENU_CATEGORY_PROD_MAPG MP where MP.PROD_ID=#{prodId})
        connect by prior MC.up_menu_id = MC.MENU_ID
    </select>

</mapper>
