<?xml version="1.0" encoding="UTF-8"?>
<beans 
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:cache="http://www.springframework.org/schema/cache"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
						http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
						http://www.springframework.org/schema/context
						http://www.springframework.org/schema/context/spring-context-3.2.xsd
						http://www.springframework.org/schema/aop 
						http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
						http://www.springframework.org/schema/cache
						http://www.springframework.org/schema/cache/spring-cache-3.2.xsd
						">

    <!-- PlanDas : Global Cache -->
    <bean id="globalCacheProcessor" class="com.skplanet.storeplatform.framework.core.cache.process.GlobalCacheProcessor" />
    <bean id="globalAnnotationCacheOperationSource" class="org.springframework.cache.annotation.AnnotationCacheOperationSource" />
    <bean id="globalCacheInterceptor" class="com.skplanet.storeplatform.framework.core.cache.interceptor.GlobalCacheInterceptor"> 
        <property name="cacheOperationSources" ref="globalAnnotationCacheOperationSource"/>
        <property name="cacheManager" ref="plandasjCacheManager" />
    </bean>
    <bean id="globalCacheAdvisor" class="org.springframework.cache.interceptor.BeanFactoryCacheOperationSourceAdvisor">
        <property name="cacheOperationSource" ref="globalAnnotationCacheOperationSource" />
        <property name="advice" ref="globalCacheInterceptor" />
    </bean>
    <aop:config> 
        <aop:advisor advice-ref="globalCacheAdvisor" pointcut="execution(* com.skplanet.storeplatform.*.*(..))" order="0" /> 
    </aop:config>
    
    <bean id="plandasjConnectionFactory" 
        class="com.skplanet.spring.data.plandasj.PlandasjConnectionFactory"
        p:domainName="#{propertiesForSac['plandasj.domainName']}" 
        p:serviceCode="#{propertiesForSac['plandasj.serviceCode']}" 
        p:authCode="#{propertiesForSac['plandasj.authCode']}" /> 

    <bean id="plandasjTemplate" 
        class="com.skplanet.spring.data.plandasj.PlandasjTemplate" 
        p:connection-factory-ref="plandasjConnectionFactory" /> 

    <bean id="plandasjCacheManager" 
        class="com.skplanet.spring.data.plandasj.PlandasjCacheManager" 
        p:template-ref="plandasjTemplate" >
        <property name="usePrefix" value="true" />
        <property name="expires">
            <map>
                <entry key="sac:display:product:app" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:app:v2" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:music" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:music:v2" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:freepass" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:ebookcomic" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:vod" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:vod:v2" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:shopping" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:product:webtoon" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:subcontent" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:menuinfo" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:tmembershipdcrate:v2" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:updateProductInfo" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
                <entry key="sac:display:updateProductInfo:v3" value="1800" value-type="java.lang.Long"/>  <!-- 30분 -->
            </map>
        </property>
    </bean>
      
    <bean name="plandasjpool" class="com.skplanet.plandasj.PlandasjPool" destroy-method="release">
        <constructor-arg type="java.lang.String" name="domainName" value="#{propertiesForSac['plandasj.domainName']}" />
        <constructor-arg type="java.lang.String" name="serviceCode" value="#{propertiesForSac['plandasj.serviceCode']}" />
        <constructor-arg type="java.lang.String" name="authCode" value="#{propertiesForSac['plandasj.authCode']}" />
    </bean> 
    <!-- pool client 방식 -->
    <!-- PlanDas : Global Cache -->

</beans>